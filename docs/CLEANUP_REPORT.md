# Cleanup Report (Legacy Archive)

**Date:** 2026-02-10  
**Live Root (only active runtime):** `/home/devbox/.openclaw`  
**Cold Archive Base:** `/home/devbox/archives/`  
**Cold Archive Name:** `openclaw_legacy_2026-02-10`

## Plan (Non-Destructive)

- Verify systemd points at the live root only (no legacy paths).
- Identify legacy OpenClaw artifacts outside the live root and obvious debris inside the live root.
- Move allowlisted legacy items into the cold archive directory (no deletions).
- Redact secrets in archived copies.
- Disable any archived `docker-compose.yml` by renaming to `docker-compose.yml.DISABLED`.
- Make the archive read-only (`chmod -R a-w`).
- Re-verify that systemd + docker compose usage is anchored to `/home/devbox/.openclaw`.

## Files/Dirs Archived (Exact Paths)

Archived into: `/home/devbox/archives/` + `openclaw_legacy_2026-02-10`

- `/home/devbox/openclaw`
- `/home/devbox/openclaw-upstream`
- `/home/devbox/.openclaw/openclaw.json.bak`
- `/home/devbox/.openclaw/openclaw.json.bak.1`
- `/home/devbox/.openclaw/openclaw.json.bak.2`
- `/home/devbox/.openclaw/openclaw.json.bak.3`
- `/home/devbox/.openclaw/openclaw.json.bak.4`
- `/home/devbox/.openclaw/cron/jobs.json.bak`
- `/home/devbox/.openclaw/services/dashboard/dashboard.log`
- `/home/devbox/.openclaw/agents/main/agent/auth-profiles.json.bak`
- `/home/devbox/.openclaw/__pycache__`

## Archive Safety Checks

- Secrets redaction: the archived `agents/main/agent/auth-profiles.json.bak` contained a Kimi-style API key string; the archived copy was redacted.
- Archive is read-only:
  - Example: `/home/devbox/archives/` + `openclaw_legacy_2026-02-10` permissions are `dr-xr-xr-x`.

## What Remains Active (Live Root)

Everything under `/home/devbox/.openclaw` except the allowlisted legacy items above.

## Verification Evidence

### 1) systemd Points To Live Root Only

Command: `systemctl --user cat openclaw-gateway.service`

Evidence (token redacted):
```ini
[Service]
EnvironmentFile=/home/devbox/.openclaw/.env
ExecStart="/usr/bin/node" "/home/devbox/.local/lib/node_modules/openclaw/dist/index.js" gateway --port 18789
Environment=HOME=/home/devbox
Environment=OPENCLAW_GATEWAY_TOKEN=REDACTED
```

### 2) No References To Archived Paths In Live Config/Scripts

Commands:
- `grep -R "archives/"'openclaw_legacy' /home/devbox/.openclaw || true`
- `grep -R "openclaw_old" /home/devbox/.openclaw || true`

Result:
- No matches.

### 3) Docker Compose Uses Only Live Root

Command: `docker compose -f /home/devbox/.openclaw/docker-compose.yml config --services`

Evidence:
```text
amharic-translation
chroma
ollama
rag-service
sandbox-guard
sandbox-guard-proxy
tool-runner
```

### 4) Tests Run From Live Root Only

Command: `cd /home/devbox/.openclaw && ./tests/run_all_tests.sh`

Result:
- See latest `docs/VERIFICATION_REPORT.md` (generated by the test runner).

### 5) Confirm No Legacy Docker Stacks Are Running (Report Only)

Command: `docker ps --format "table {{.Names}}\t{{.Image}}\t{{.Ports}}"`

Evidence (excerpt):
```text
tool-runner           openclaw-tool-runner:local           18889/tcp
sandbox-guard-proxy   nginxinc/nginx-unprivileged:alpine   0.0.0.0:18888->18888/tcp
sandbox-guard         openclaw-sandbox-guard:local         18888/tcp
rag-service           openclaw-rag-service                 0.0.0.0:8811->18791/tcp
chroma                chromadb/chroma:latest               0.0.0.0:8000->8000/tcp
amharic-translation   openclaw-amharic-translation         0.0.0.0:18790->18790/tcp
ollama                ollama/ollama:latest                 0.0.0.0:11434->11434/tcp
open-webui            ghcr.io/open-webui/open-webui:main   0.0.0.0:3000->8080/tcp
redis                 redis:6.2                            6379/tcp
mongo                 mongo:6.0                            27017/tcp
```

**Finding (report-only, no changes made):**
- `open-webui`, `redis`, and `mongo` are running but are not defined in `/home/devbox/.openclaw/docker-compose.yml` (likely from another stack).

## Needs Manual Confirmation (Ambiguous, Not Moved)

- `/home/devbox/.openclaw/workspace/`
  - It appears to be a legacy scaffold, but it is referenced by `tests/verify_system_hardening.sh`.
  - Not moved automatically.

## Post-Cleanup Tree (Live Root)

Command: `cd /home/devbox/.openclaw && tree -a -L 2`

```text
.
├── .agent
├── .env
├── .git
├── .gitignore
├── MEMORY_POLICY.md
├── README.md
├── agents
├── canvas
├── completions
├── connect_network.sh
├── credentials
├── cron
├── data
├── devices
├── docker-compose.yml
├── docs
├── identity
├── logs
├── media
├── memory
├── openclaw.json
├── scripts
├── secrets
├── services
├── start_system.sh
├── subagents
├── telegram
├── test_keys.py
├── test_keys_batch.py
├── test_write.txt
├── tests
├── tools
├── update-check.json
├── workspace
└── workspaces
```
